<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="crewMembers">
	<!--20210112 1615 주성호 헤더 -->
	<select id="selectOwnList" parameterType="int"  resultType="CrewMember">
		SELECT m.no, c.no, user_no userNo, role, report_num reportNum, profile_img profileImg, introduction, type, m.regdate,cover_img coverImg
		FROM crew_members m, crews c
		WHERE m.user_no=#{no} AND m.crew_no = c.no
		ORDER BY 9
	</select>
	
	<!-- 2021 01 15 주성호 크루 멤버 넣기 -->
	<insert id="insertCrewMemberByCaptin" parameterType="CrewMember">
		INSERT INTO crew_members(no, CREW_NO, USER_NO, ROLE, REPORT_NUM, PROFILE_IMG, INTRODUCTION, TYPE, regdate)
		VALUES(crew_members_seq.nextval, #{crewNo}, #{userNo}, #{role}, #{reportNum},#{profileImg},#{introduction},#{type}, systimestamp)
	</insert>
	
	<!-- 2021 01 16 주성호 크루 멤버 한명 불러오기 -->
	<select id="selectCrewMemberOneByNo" parameterType="int" resultType="UserMember">
		SELECT c.no, crew_no crewNo,user_no userNo , role, report_num reportNum, profile_img profileImg, introduction, type, c.regdate, u.name
		FROM crew_members c, users u
		WHERE c.user_no = u.no
		AND c.no = #{no}
	</select>
	
	
</mapper>