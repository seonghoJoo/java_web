<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="posts">

	<select id="selectPostDetailOne" parameterType="int" resultType="Post">
		SELECT no,member_no memberNo,regdate,contents,like_cnt likeCnt,board_no boardNo,image_applicable imageApplicable,reply_cnt replyCnt
		FROM posts
		WHERE no = #{no}
	</select>
	
	<!-- 
	<select id="selectPostDetailList" parameterType="int" resultType="CrewPost">
		SELECT p.no,p.member_no memberNo,p.regdate,contents,like_cnt likeCnt,board_no boardNo,image_applicable imageApplicable
		FROM posts p, boards b
		WHERE b.crew_no = #{crewNo} AND board_no = b.no
	</select>
	 -->
	
	<select id="selectPostDetailList" resultType="CrewPost" parameterType="PageVO">
		SELECT no, memberNo, regdate, contents, likeCnt, boardNo, imageApplicable,replyCnt
		FROM	(SELECT no, memberNo, regdate, contents, likeCnt, boardNo, imageApplicable,replyCnt, rownum r
				FROM	(
						SELECT	p.no,p.member_no memberNo,p.regdate,contents,like_cnt likeCnt,board_no boardNo,image_applicable imageApplicable, reply_cnt replyCnt
						FROM posts p, boards b
						WHERE b.crew_no = #{no} AND board_no = b.no
						ORDER BY 3 DESC
						)
				)
		WHERE r BETWEEN #{start} AND #{end}
	</select>
	
</mapper>